language: python
python:
  - '3.6'
before_install:
  - openssl aes-256-cbc -K $encrypted_3b9f0b9d36d1_key -iv $encrypted_3b9f0b9d36d1_iv
    -in secrets.tar.enc -out secrets.tar -d
  - tar xvf secrets.tar
  - mv google_compute_engine /home/travis/.ssh/
  - chmod 0600 /home/travis/.ssh/google_compute_engine
install:
  - pip install -r ./requirements.txt
script:
  - molecule --debug create
    && molecule --debug converge
    && molecule --debug verify
after_script:
  - molecule destroy
env:
  matrix:
    - GCE_CREDENTIALS_FILE="$(pwd)/credentials.json"
  global:
    - secure: 1NOpppgPDXxvQ2qii1gEzMo3IlMzoNxlAnyW1JWxRkoThFPY/4VawnVFEgPdADiG3gpAIDkj3S1kFKxDCp407hE61jNfb51ZrnAxVHEjEDIyk9/a8kJcJsXGI4/DBIF+0xDtfKtNK/GrSsNFgXy3sm5igOJf3spZcbnGMojEmMBNTgBe3R5xIXi1ynyWj7LL7Gg1CjbIBxSkFQVLpzKrRzsoEZ1fBHxQ9h9j1GVIjzoErvs6dzV6i2dXrdwreCsQ0j8vn0NdY48zJAkADOdvf06chq3RlK7pWpw9lJ9RxmwWbJ/gXrUdX8CdnzqulzbAhugCkR6w/9qSj0k/JZ+SExZj6118LYcAWvXVnqPIadAhV60cAGyL7IEyYnSdU7wNX/ZwCijrhsLlvfxPTPgCrXfydt/39pRiQ1Jfvw4WBeVqrykSCCoggqBxNih95fi//C4IwX8QeqgsVPo0AA/aLmRHYwA1jF/QRMVjiX8cjPGZXJaY25wkQx/Us3x1DQ732nioqWvMqCppt74G0lWWRazhNjgzZ0oJxWB6H9JaeicYtxABXpB4dzFT0avPVOkRuAcSNFFnZWii7cPhPu3fWFBg8bD5ZlVfx3hwFwMqfnG0KH072Qqvkf0lVkG4uj/VJuJkZP3mN8PftKLuU1zAKz+GLcrpou30M4uSaMy6AO4=
    - secure: qll5aFA6nezarZDv0CK1qfNQwNduUu+WkKjl6waQ7KMtZca6NNCWAEYfVimchm/bfjan2FUgVR0vBVcydfgVfEU5/ZBfBbBOeSEmShxtGop59RLLeWnQOBoawgLWAekqpZ0XqFQxXV4nA6MJ5WLku6hOTA9zz+MV0nVs6uHxW4L+8WvE2gy8jCTLRtTNjelnTN37CjFpOJPkHGrn8Hp1y6f2uZczxUz1S8FxY66bpSSRtwOoMw73bFlvqT7MBEYfk9h6UufQIzwYsHociMZqkLq2jDotJTvcXRUNpeEMJjSOcse7aD5HSAQC7Sk5GNE9MnwrifWLyEU5zRsQ9FYyOIYaJxg1jlP13kyGLSG7rXuWFxFWKi131nx2CHKHkD/eq7L6czdZkaeakK5S0g7gjTzRt5P6q038Jnovedwxij6XMMrmRgDwb9IP/ASHqfRL0kXNVox3CSRNquIQ6duN1GpjXabv+XGDFVWuA2dWBrpEBhOcPCfMwNGgIIXjV3kwevUNkFMvV9dLEEH1IgNi6x9CEyjHi8kcx3Sbfk6al+u9Ld2S6gl3nmTBpXm+ExZMu0g70FaWjf+eOyG/ZtboSt0t0Te0NTezWH9ntcYCQcmGxBekgJKDW7rCqt7XPIqAaKxAwyRTLkxxYLRqDoOBRqyS5/SDb8M1RHbrsL09Hn4=
    - secure: Wn5SWzF44gAJIYkksuefISaE2qvYQuJ6uSCMDlIetoV9bVetOOlht1i4H4E0XN0QHVxyiRVcGxMvniIAI4fzkcLbIy7xz3NgDQKR478bwwL7yEd0hR/0mjMWzlJt9ypBPrhoueDyn5tr4nmCX/NM4VcH+KYcBxBE9I4AEaBrw+1rHsCT8bZ15C9YN3VMqphR86nFndU9GcrvScMbr560iw4cuIKZS0J057I3M7mXWNNZGwXqU00ia/VDQsf753EkxTx3RMcSvsrxtNS4w0zN5FKrA6iREodlOJwJXeAlRhC31k+X9Ozskz1/RDZr7aTGM7nBJXhCpZQ2KuBnhuNARmzI/cDaysVWJk9RV0FGDvyFH4S2rBh+Sivgvghhoqk8LXx/AIpR9hVmTgZQ+qOYMT9lQA7LVer6beIp4pduzn9xi1RlLMF9nTOWFdynuipM3rpus6Zy34SlvkgzQ72hlfJF/vcQyJ8pdmFs31WIVgOyx458pWN5if0ycpNqb7l+oMT0NdbAr2MqKfL2HtD/cGTX2u7WkZ/g5fE0nJulinx2uCdvwk5yawlcONK+jP1JfvsNbO00vnRqNz7Ttd8RqbOH0hAP2I3a1a78mCU8Alrw6D2yEJEZLZlIDmHN7X7ScSgOHKRL/KlSRrTMEHZ6b9RNqp7de4fwHi02+yLcQ1E=
notifications:
  slack:
    rooms:
      - secure: sxLtIwo9iA2T6s2eEICFeZoGg75Z5M0LTRfHY2/M73vER5wxZQUFHoe8/nosjNfhB52Zx9n2oW5wzPJRkcp0xa781kbsinvef/bUf2/z8T1DpG0WrJfS04P4kH06TBzmjMG3v0Qv+t7p5pVFV8OwLLSi4fGksxU8RO72POiFpivt4vwIOho/CsDVKhA6Ui0ImuFKKaBfKQRHjAQ/hZtUHhL/Cmih+fpHsgdAHHE3HRGo1m6dO8gA7ecqamHxpy1njvQiQbAqSW4u+z8Fj404+ayNOnF0tHe/U81gFW56wMUvS92FD+F8aIL6dqphZDpWrMxgahx2P0RshWcm3v7bvnat2M9ZRIwJ98A2kZvG/RB+w0t4lUcY08nrLXtNrdUViIeohmSsoEaDocsDE/0Fgs+A7uPPYHwzFrtRL8frIMtuBE0T2Ip0OeVaoUhf+O5IUrgR2JXRm1B7j8TBheEtdl3uUuQ0ogaXd6f80399Xr/HwvwPiRJ4zLbWNew3tqZzpnDcPf/VkNm9PpJYNNO6vidDjPEIDOOlwygyLmCL2CIhqx/oy5WvRtIZpv2NfO7eISxVUtbRAymw9KGW5GD8ZiTndurt339CMHG1elV5Z7+9oSD/94ptQEZluDsxN/GTQOeyGC8EI9QLAkZEFi/Lc8xGudHqht5K1r/f3SymyF0=
